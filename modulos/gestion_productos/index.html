<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Productos - Admin | RED Estampaci√≥n</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/gestion.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <h1 class="logo">RED</h1>
        <nav class="header-nav">
            <a href="../catalogo/index.html" class="nav-link">Cat√°logo</a>
            <a href="index.html" class="nav-link active">Admin: Productos</a>
            <a href="../../admin/index.html" class="nav-link">Dashboard</a>
        </nav>
        <button class="user-btn">Admin</button>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="container">
            <!-- BREADCRUMB -->
            <nav class="breadcrumb">
                <ul class="breadcrumb-list">
                    <li class="breadcrumb-item"><a href="../../index.html" class="breadcrumb-link">Inicio</a></li>
                    <li class="breadcrumb-item"><a href="../../admin/index.html" class="breadcrumb-link">Admin</a></li>
                    <li class="breadcrumb-item">Gesti√≥n de Productos</li>
                </ul>
            </nav>

            <!-- PAGE HEADER -->
            <div class="page-header flex justify-between items-center">
                <div>
                    <h1 class="page-title">Gesti√≥n de Productos</h1>
                    <p class="page-subtitle">Crear, editar, aprobar y gestionar productos del cat√°logo</p>
                </div>
                <button class="btn btn-primary btn-lg" id="btnNuevoProducto">
                    ‚ûï Crear Producto
                </button>
            </div>

            <!-- FILTROS Y B√öSQUEDA (RF-007 a RF-010) -->
            <div class="filters-container">
                <div class="filters-header">
                    <h3 class="filters-title">Filtros de B√∫squeda</h3>
                    <a href="#" class="filters-clear" id="limpiarFiltros">Limpiar filtros</a>
                </div>

                <div class="filters-grid">
                    <!-- B√∫squeda por nombre (RF-007) -->
                    <div class="filter-group">
                        <label class="filter-label">Buscar por nombre</label>
                        <div class="search-bar">
                            <span class="search-icon">üîç</span>
                            <input 
                                type="text" 
                                class="search-input form-input" 
                                id="buscarNombre" 
                                placeholder="Buscar producto...">
                        </div>
                    </div>

                    <!-- Estado activo/inactivo (RF-008) -->
                    <div class="filter-group">
                        <label class="filter-label">Estado</label>
                        <select class="form-select" id="filtroActivo">
                            <option value="">Todos</option>
                            <option value="true" selected>Activos</option>
                            <option value="false">Inactivos</option>
                        </select>
                    </div>

                    <!-- Estado aprobado (RF-008) -->
                    <div class="filter-group">
                        <label class="filter-label">Aprobaci√≥n</label>
                        <select class="form-select" id="filtroAprobado">
                            <option value="">Todos</option>
                            <option value="true" selected>Aprobados</option>
                            <option value="false">Pendientes</option>
                        </select>
                    </div>

                    <!-- Rango de precio (RF-009) -->
                    <div class="filter-group">
                        <label class="filter-label">Rango de Precio</label>
                        <div class="flex gap-sm">
                            <input 
                                type="number" 
                                class="form-input" 
                                id="precioMin" 
                                placeholder="Min"
                                min="0">
                            <input 
                                type="number" 
                                class="form-input" 
                                id="precioMax" 
                                placeholder="Max"
                                min="0">
                        </div>
                    </div>

                    <!-- Ordenamiento (RF-010) -->
                    <div class="filter-group">
                        <label class="filter-label">Ordenar por</label>
                        <select class="form-select" id="ordenarPor">
                            <option value="fecha_desc">M√°s recientes</option>
                            <option value="fecha_asc">M√°s antiguos</option>
                            <option value="nombre_asc">Nombre (A-Z)</option>
                            <option value="nombre_desc">Nombre (Z-A)</option>
                            <option value="precio_asc">Precio (menor)</option>
                            <option value="precio_desc">Precio (mayor)</option>
                        </select>
                    </div>
                </div>

                <!-- Chips de filtros activos -->
                <div class="active-filters" id="chipsActivos"></div>
            </div>

            <!-- RESULTADOS -->
            <div class="results-container">
                <div class="results-header flex justify-between items-center mb-lg">
                    <p class="results-count text-gray" id="contadorResultados">
                        Cargando productos...
                    </p>
                </div>

                <!-- TABLA DE PRODUCTOS (RF-007 a RF-022) -->
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Imagen</th>
                                <th>Nombre</th>
                                <th>Precio Base</th>
                                <th>Variantes</th>
                                <th>Stock</th>
                                <th>Estado</th>
                                <th>Aprobado</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaProductos">
                            <!-- Productos din√°micos -->
                        </tbody>
                    </table>
                </div>

                <!-- PAGINACI√ìN (RF-007) -->
                <div class="pagination" id="paginacion">
                    <!-- Botones de paginaci√≥n din√°micos -->
                </div>

                <!-- EMPTY STATE -->
                <div class="empty-state hidden" id="emptyState">
                    <div class="empty-state-icon">üì¶</div>
                    <h3 class="empty-state-title">No se encontraron productos</h3>
                    <p class="empty-state-text">Intenta cambiar los filtros o crea un nuevo producto</p>
                    <button class="btn btn-primary" id="btnCrearDesdeEmpty">Crear Producto</button>
                </div>
            </div>
        </div>
    </main>

    <!-- MODAL: CREAR/EDITAR PRODUCTO (RF-001 a RF-006, RF-011 a RF-017) -->
    <div class="modal" id="modalProducto">
        <div class="modal-content modal-large">
            <div class="modal-header flex justify-between items-center mb-lg">
                <h2 class="modal-title" id="tituloModal">Crear Producto</h2>
                <button class="btn-close" id="cerrarModal">‚úñ</button>
            </div>

            <form id="formProducto">
                <input type="hidden" id="productoId">

                <!-- Informaci√≥n b√°sica (RF-001, RF-011) -->
                <div class="form-section mb-xl">
                    <h3 class="form-section-title">Informaci√≥n B√°sica</h3>
                    
                    <div class="form-group">
                        <label class="form-label" for="nombre">Nombre del Producto *</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="nombre" 
                            maxlength="100"
                            required
                            placeholder="Ej: Camiseta B√°sica Algod√≥n">
                        <span class="form-error" id="errorNombre"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="descripcion">Descripci√≥n *</label>
                        <textarea 
                            class="form-textarea" 
                            id="descripcion" 
                            rows="4"
                            maxlength="500"
                            required
                            placeholder="Describe el producto..."></textarea>
                        <small class="text-sm text-gray">
                            <span id="contadorDescripcion">0</span>/500 caracteres
                        </small>
                        <span class="form-error" id="errorDescripcion"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="precioBase">Precio Base (COP) *</label>
                        <input 
                            type="number" 
                            class="form-input" 
                            id="precioBase" 
                            min="1"
                            step="1"
                            required
                            placeholder="25000">
                        <span class="form-error" id="errorPrecio"></span>
                    </div>
                </div>

                <!-- Im√°genes (RF-002, RF-003, RF-014, RF-015) -->
                <div class="form-section mb-xl">
                    <h3 class="form-section-title">Im√°genes (M√°ximo 5)</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Imagen Principal *</label>
                        <input 
                            type="file" 
                            class="form-input" 
                            id="imagenPrincipal"
                            accept="image/jpeg,image/png">
                        <small class="text-sm text-gray">JPG o PNG, m√°ximo 2MB, m√≠nimo 400x400px</small>
                        <span class="form-error" id="errorImagen"></span>
                    </div>

                    <div class="imagen-preview" id="previewImagen">
                        <!-- Preview de imagen -->
                    </div>
                </div>

                <!-- Variantes (RF-004, RF-005, RF-016) -->
                <div class="form-section mb-xl">
                    <h3 class="form-section-title flex justify-between items-center">
                        <span>Variantes (Tallas y Colores)</span>
                        <button type="button" class="btn btn-sm btn-secondary" id="btnAgregarVariante">
                            ‚ûï Agregar Variante
                        </button>
                    </h3>
                    
                    <div id="variantes-container">
                        <!-- Variantes din√°micas -->
                    </div>
                </div>

                <!-- Checklist de validaci√≥n (RF-006) -->
                <div class="form-section mb-xl">
                    <h3 class="form-section-title">Checklist de Validaci√≥n</h3>
                    <div class="checklist">
                        <div class="checklist-item" id="checkNombre">
                            <span class="check-icon">‚≠ï</span>
                            <span>Nombre del producto</span>
                        </div>
                        <div class="checklist-item" id="checkDescripcion">
                            <span class="check-icon">‚≠ï</span>
                            <span>Descripci√≥n completa</span>
                        </div>
                        <div class="checklist-item" id="checkPrecio">
                            <span class="check-icon">‚≠ï</span>
                            <span>Precio base definido</span>
                        </div>
                        <div class="checklist-item" id="checkImagen">
                            <span class="check-icon">‚≠ï</span>
                            <span>Imagen principal</span>
                        </div>
                        <div class="checklist-item" id="checkVariantes">
                            <span class="check-icon">‚≠ï</span>
                            <span>Al menos 1 variante con stock</span>
                        </div>
                    </div>
                </div>

                <!-- Botones -->
                <div class="modal-footer flex gap-md justify-end">
                    <button type="button" class="btn btn-secondary" id="cancelarProducto">Cancelar</button>
                    <button type="submit" class="btn btn-primary" id="guardarProducto" disabled>
                        Guardar Producto
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: CONFIRMAR ELIMINACI√ìN (RF-018, RF-019) -->
    <div class="modal" id="modalEliminar">
        <div class="modal-content">
            <div class="modal-header mb-lg">
                <h2 class="modal-title">‚ö†Ô∏è Confirmar Eliminaci√≥n</h2>
            </div>
            <div class="modal-body">
                <p id="mensajeEliminar">¬øEst√°s seguro de que deseas desactivar este producto?</p>
                <div class="advertencias mt-md" id="advertenciasEliminar">
                    <!-- Advertencias din√°micas -->
                </div>
            </div>
            <div class="modal-footer flex gap-md justify-end mt-lg">
                <button class="btn btn-secondary" id="cancelarEliminar">Cancelar</button>
                <button class="btn btn-danger" id="confirmarEliminar">Desactivar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: APROBAR/DESAPROBAR (RF-020, RF-021) -->
    <div class="modal" id="modalAprobar">
        <div class="modal-content">
            <div class="modal-header mb-lg">
                <h2 class="modal-title" id="tituloModalAprobar">Aprobar Producto</h2>
            </div>
            <div class="modal-body">
                <p id="mensajeAprobar">Este producto ser√° visible en el cat√°logo p√∫blico.</p>
                
                <!-- Motivo desaprobaci√≥n -->
                <div class="form-group hidden" id="grupoMotivo">
                    <label class="form-label" for="motivoDesaprobacion">Motivo (requerido)</label>
                    <textarea 
                        class="form-textarea" 
                        id="motivoDesaprobacion" 
                        rows="3"
                        maxlength="200"
                        placeholder="Explica por qu√© desapruebas este producto..."></textarea>
                    <small class="text-sm text-gray">
                        <span id="contadorMotivo">0</span>/200 caracteres
                    </small>
                </div>
            </div>
            <div class="modal-footer flex gap-md justify-end mt-lg">
                <button class="btn btn-secondary" id="cancelarAprobar">Cancelar</button>
                <button class="btn btn-primary" id="confirmarAprobar">Aprobar</button>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATIONS -->
    <div id="toastContainer"></div>

    <!-- SCRIPTS -->
    <script src="../../assets/js/mockData.js"></script>
    <script src="js/gestion.js"></script>
</body>
</html>
